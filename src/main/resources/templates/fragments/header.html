<header>
  <style>
     #nav-toast {
       position: absolute;
       right: 1rem;
       top: 0.5rem;
       background: #fee;
       color: #900;
       border: 1px solid #f5c2c7;
       border-radius: 6px;
       padding: 0.5rem 0.75rem;
       display: flex;
       align-items: center;
       gap: 0.5rem;
       box-shadow: 0 4px 10px rgba(0,0,0,.08);
       z-index: 1000;
       max-width: clamp(200px, 50vw, 480px);
       font-size: 0.9rem;
     }
     #nav-toast .toast-close {
       background: transparent;
       border: 0;
       font-size: 1.1rem;
       line-height: 1;
       cursor: pointer;
       color: inherit;
       padding: 0 0 0 0.25rem;
    }
  </style>

  <nav class="container">
    <ul>
      <li><a href="/display" class="secondary">About</a></li>
    </ul>

    <ul>
      <li><strong><a href="/" class="secondary">Home</a></strong></li>
    </ul>
    <ul>
      <li style="display: flex; align-items: center; gap: 0.5rem;">
        <a th:if="${session.auth != null}" th:href="'/profile?id=' + ${session.auth.user().getEmail()}" th:text="${session.auth.user().getName()}" style="display: flex; align-items: center; font-size: 0.9rem"></a>
        <a th:href="'/profile?id=' + ${session.auth?.user()?.getEmail()}" class="secondary" style="display: flex; align-items: center;">
          <svg width="1rem" height="1rem" viewBox="0 0 16 16"
               xmlns="http://www.w3.org/2000/svg">
            <path d="M8 7C9.65685 7 11 5.65685 11 4C11 2.34315 9.65685 1 8 1C6.34315 1 5 2.34315 5 4C5 5.65685 6.34315 7 8 7Z"
                  fill="#ABABAB"></path>
            <path d="M14 12C14 10.3431 12.6569 9 11 9H5C3.34315 9 2 10.3431 2 12V15H14V12Z"
                  fill="#ABABAB"></path>
          </svg>
        </a>
      </li>
    </ul>
    <div th:if="${error != null}" id="nav-toast" class="toast error" role="alert" aria-live="polite" aria-atomic="true">
      <span th:text="${error}">An error occurred.</span>
      <button type="button" class="toast-close" aria-label="Close" onclick="(function(btn){var t=btn.closest('#nav-toast'); if(t){t.remove();}})(this)">Ã—</button>
    </div>
  </nav>

  <script>
    (function(){
      var t = document.getElementById('nav-toast');
      if(!t) return;
        var timer = setTimeout(function(){ if(t) t.remove(); }, 10000);
        var hovering = false;
        t.addEventListener('mouseenter', function(){ hovering = true; clearTimeout(timer); });
        t.addEventListener('mouseleave', function(){ if(hovering){ timer = setTimeout(function(){ if(t) t.remove(); }, 4000); hovering = false; } });
      }
    )();
  </script>
</header>
