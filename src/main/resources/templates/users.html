<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="~{fragments/head :: head}"></head>

<body class="container">
<header th:replace="~{fragments/header :: header}"></header>

<h1>All Users</h1>

<table>
    <thead>
    <tr>
        <th>Name</th>
        <th>Email</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${users}">
        <td th:text="${user.name}"></td>
        <td th:text="${user.email}"></td>
        <td>
            <span th:if="${user.email == currentUser.email}">You</span>

            <span class="request-sent"
                  th:if="${#bools.isTrue(friendService.hasPendingRequest(currentUser, user))}">
        Request sent
      </span>

            <a th:if="${user.email != currentUser.email
                  and !friendService.hasPendingRequest(currentUser, user)}"
               th:href="@{'/friends/add/' + ${user.email}}"
               role="button"
               class="secondary">âž• Send request</a>
        </td>
    </tr>
    </tbody>


</table>

<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>
